# XSRUPB 主题首页重新设计

## 概述
本次更新完全按照原型图 `d:\wordpress\原型图\首页\` 重新创建了 XSRUPB WordPress 主题的首页，确保所有 HTML 结构、CSS 样式和 JavaScript 功能都与原型图完全一致。

## 更新的文件

### 1. 核心模板文件

#### header.php
- 完全重写，按照原型图的头部结构
- 包含顶部栏：Logo、LOGIN/REGISTER、搜索、收藏、购物车
- 包含导航栏：首页、产品下拉菜单、关于我们、技术支持、联系我们
- 集成 WordPress 菜单系统和 WooCommerce 购物车

#### footer.php
- 完全重写，按照原型图的页脚结构
- 4列布局：公司信息、产品分类、客户服务、关注我们
- 包含社交链接、支付方式、安全认证
- 页脚底部：版权信息和链接

#### front-page.php
- 完全重写，按照原型图的首页结构
- 包含以下区域：
  - **轮播图区域**：4个轮播项，带前后按钮和指示点
  - **新品上线区域**：5列产品网格，显示特色产品
  - **热门推荐区域**：带标签切换，显示不同分类的产品
  - **视频区域**：3个视频卡片
  - **更多产品区域**：5列产品网格，显示促销产品
- 使用 WooCommerce 动态获取产品数据
- 包含空状态占位符

### 2. 样式文件

#### assets/css/main.css
- 完全使用原型图的 style.css 样式
- 包含所有页面元素的样式：
  - 头部和导航栏样式
  - 轮播图样式和动画
  - 产品网格和卡片样式
  - 标签切换样式
  - 视频区域样式
  - 页脚样式
  - 响应式设计
- 保持与原型图完全一致的视觉效果

### 3. JavaScript 文件

#### assets/js/main.js
- 完全使用原型图的 script.js 功能
- 包含以下功能：
  - 轮播图自动播放和手动切换
  - 标签切换功能
  - 下拉菜单延迟折叠（500ms）
  - 产品搜索功能（带防抖）
  - 平滑滚动
  - 空状态检查
  - 购买按钮和视频播放事件

#### assets/js/home.js
- 首页专用 JavaScript 文件
- 使用模块化设计，包含：
  - Carousel 模块：轮播图功能
  - Tabs 模块：标签切换功能
  - VideoPlayer 模块：视频播放功能
  - ProductCards 模块：产品卡片交互
- 暴露全局函数供内联事件使用

### 4. 辅助类文件

#### inc/class-nav-walker.php
- 自定义导航菜单 Walker 类
- 支持下拉菜单
- 自动添加下拉箭头
- 包含默认菜单回退函数

### 5. 更新的文件

#### functions.php
- 添加 class-nav-walker.php 的加载

#### inc/class-asset-manager.php
- 添加 home.js 的条件加载（仅在首页加载）

## 功能特性

### 1. 轮播图
- 4个轮播项
- 自动播放（5秒间隔）
- 前后按钮手动切换
- 指示点导航
- 平滑过渡动画

### 2. 产品展示
- **新品上线**：显示最新的特色产品（最多5个）
- **热门推荐**：按产品分类显示，支持标签切换
- **更多产品**：显示促销产品（最多5个）
- 产品卡片包含：图片、标题、描述、价格、购买按钮
- 产品标签：NEW、HOT、SALE

### 3. 视频区域
- 3个视频卡片
- 播放按钮悬停效果
- 点击播放功能（待实现）

### 4. 导航菜单
- 顶部栏：Logo、登录/注册、搜索、收藏、购物车
- 导航栏：首页、产品（下拉菜单）、关于我们、技术支持、联系我们
- 下拉菜单延迟折叠（500ms）
- 当前页面高亮

### 5. 页脚
- 4列布局：公司信息、产品分类、客户服务、关注我们
- 社交链接
- 支付方式图标
- 安全认证标识
- 页脚底部链接

### 6. 响应式设计
- 桌面端：5列产品网格
- 平板端：3列产品网格
- 移动端：1-2列产品网格
- 自适应导航菜单

### 7. 空状态处理
- 当产品分类没有商品时，显示友好的占位符
- 包含图标、标题和描述

## WordPress 集成

### 1. WooCommerce 集成
- 动态获取产品数据
- 显示产品价格、图片、标题
- 支持产品分类
- 购物车数量和总价显示

### 2. WordPress 功能
- 使用 wp_head() 和 wp_footer()
- 支持自定义菜单
- 使用翻译函数（国际化）
- 主题定制器支持（公司信息、社交链接等）

### 3. 最佳实践
- 所有输出都经过转义（esc_html、esc_url、esc_attr）
- 使用 WordPress 标准函数
- 遵循 WordPress 编码标准
- 模块化代码结构

## 使用说明

### 1. 激活主题
1. 将主题上传到 `wp-content/themes/xsrupb/`
2. 在 WordPress 后台激活主题

### 2. 配置菜单
1. 进入 外观 > 菜单
2. 创建主菜单并分配到 "Primary Menu" 位置
3. 添加产品分类作为子菜单项

### 3. 设置首页
1. 进入 设置 > 阅读
2. 选择 "静态页面" 作为首页显示
3. 选择一个页面作为首页（或让 WordPress 自动使用 front-page.php）

### 4. 添加产品
1. 确保 WooCommerce 插件已安装并激活
2. 添加产品并设置产品分类
3. 将重要产品设置为 "特色产品"
4. 设置产品促销价格

### 5. 主题定制
1. 进入 外观 > 自定义
2. 设置公司信息（地址、邮箱、电话）
3. 设置社交链接

## 技术细节

### CSS 架构
- 使用 CSS Grid 布局产品网格
- 使用 Flexbox 布局头部和页脚
- CSS 变量用于颜色和间距
- 平滑过渡和动画效果

### JavaScript 架构
- 模块化设计
- 事件委托
- 防抖函数优化性能
- 无 jQuery 依赖（home.js）

### 性能优化
- 条件加载脚本（home.js 仅在首页加载）
- CSS 和 JS 文件版本控制
- 图片懒加载（可选）
- 最小化 DOM 操作

## 浏览器兼容性
- Chrome（最新版本）
- Firefox（最新版本）
- Safari（最新版本）
- Edge（最新版本）
- 移动浏览器

## 已知问题和待办事项
- [ ] 视频播放功能需要实现（目前仅显示占位符）
- [ ] 搜索功能需要实现
- [ ] 收藏功能需要实现
- [ ] 移动端菜单切换需要实现
- [ ] 产品快速查看功能（可选）
- [ ] 产品比较功能（可选）

## 更新日志

### 版本 1.0.0 - 2024
- 完全重新设计首页，按照原型图
- 重写 header.php、footer.php、front-page.php
- 更新 main.css，使用原型图样式
- 更新 main.js，使用原型图功能
- 创建 home.js，首页专用脚本
- 创建 class-nav-walker.php，自定义导航菜单
- 集成 WooCommerce 产品数据
- 添加响应式设计
- 添加空状态处理

## 支持
如有问题或建议，请联系主题开发团队。
